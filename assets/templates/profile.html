<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title text-center">Profile</h4>
    </div>
    <div class="modal-body">
      <form class="form-horizontal" name="ctrl.profileForm" ng-submit="ctrl.updateProfile($event)" novalidate>
        <div class="form-group">
          <label for="avatar" class="col-sm-3 control-label">Your profile photo (avatar)</label>
          <div class="col-sm-9">
            <img alt="Your avatar" class="avatar" ng-src="{{ ctrl.profile.avatar || ctrl.userImage }}" />
            <label type="button" class="btn btn-default upload-avatar-btn">
              Browse<input type="file" name="avatar" ng-model="ctrl.userImage"
                           class="hidden" accept="image/jpeg,image/png,image/gif"
                           onchange="angular.element(this).scope().ctrl.changeImage(event);">
            </label>
          </div>
        </div>
        <div class="form-group">
          <label for="firstname" class="col-sm-3 control-label">First name</label>
          <div class="col-sm-9">
            <input type="text" class="form-control"
                   id="firstname" name="firstname"
                   ng-model="ctrl.profile.firstname" required>
          </div>
        </div>
        <div class="form-group">
          <label for="lastname" class="col-sm-3 control-label">Last name</label>
          <div class="col-sm-9">
            <input type="text" class="form-control"
                   id="lastname" name="lastname"
                   ng-model="ctrl.profile.lastname" required>
          </div>
        </div>
        <div class="form-group">
          <label for="email" class="col-sm-3 control-label">Email</label>
          <div class="col-sm-9">
            <input type="email" class="form-control"
                   id="email" name="email"
                   ng-model="ctrl.profile.email" required>
          </div>
        </div>
        <div class="form-group">
          <div class="togglebutton">
            <label class="col-sm-6">
              <input type="checkbox" ng-model="ctrl.changeSubscriptions"> Change Subscriptions
            </label>
          </div>
        </div>
        <div ng-show="ctrl.changeSubscriptions">
          <div class="form-group" ng-repeat-start="obj in ctrl.profile.subscribedTo track by $index">
            <label for="{{obj.type + '_' + $index}}" class="col-sm-3 control-label">Type</label>
            <div class="col-sm-9">
              <select class="form-control"
                     id="{{obj.type + '_' + $index}}"
                     ng-model="obj.type" disabled>
                <option value="all">All</option>
                <option value="group">Group</option>
                <option value="label">Label</option>
                <option value="user">Direct message</option>
              </select>
            </div>
          </div>
          <div class="form-group" ng-repeat-end ng-if="obj.type != 'all'">
            <label for="{{obj.key + '_' + $index}}" class="col-sm-3 control-label">Value(s)</label>
            <div class="col-sm-9">
              <input type="text" class="form-control"
                     id="{{obj.key + '_' + $index}}"
                     ng-model="obj.key" disabled />
            </div>
          </div>
          <button type="button" class="btn btn-raised btn-default"
                  ng-click="ctrl.addSubscription()">
            Add Subscription
          </button>
        </div>
        <div class="alert-danger error-block"></div>
        <div class="text-right">
          <button type="button" class="btn btn-raised btn-default" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-raised btn-primary">Update Profile</button>
        </div>
      </form>
    </div>
  </div>
  <script type="text/javascript">
    $.material.init();
  </script>
</div>
